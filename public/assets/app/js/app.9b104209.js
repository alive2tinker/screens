(function(t){function e(e){for(var a,i,o=e[0],c=e[1],l=e[2],d=0,m=[];d<o.length;d++)i=o[d],Object.prototype.hasOwnProperty.call(s,i)&&s[i]&&m.push(s[i][0]),s[i]=0;for(a in c)Object.prototype.hasOwnProperty.call(c,a)&&(t[a]=c[a]);u&&u(e);while(m.length)m.shift()();return r.push.apply(r,l||[]),n()}function n(){for(var t,e=0;e<r.length;e++){for(var n=r[e],a=!0,o=1;o<n.length;o++){var c=n[o];0!==s[c]&&(a=!1)}a&&(r.splice(e--,1),t=i(i.s=n[0]))}return t}var a={},s={app:0},r=[];function i(e){if(a[e])return a[e].exports;var n=a[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,i),n.l=!0,n.exports}i.m=t,i.c=a,i.d=function(t,e,n){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},i.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var a in t)i.d(n,a,function(e){return t[e]}.bind(null,a));return n},i.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="/assets/app/";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],c=o.push.bind(o);o.push=e,o=o.slice();for(var l=0;l<o.length;l++)e(o[l]);var u=c;r.push([0,"chunk-vendors"]),n()})({0:function(t,e,n){t.exports=n("56d7")},1413:function(t,e,n){},"20d2":function(t,e,n){"use strict";var a=n("f59c"),s=n.n(a);s.a},"56d7":function(t,e,n){"use strict";n.r(e);n("e260"),n("e6cf"),n("cca6"),n("a79d");var a=n("2b0e"),s=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("router-view")},r=[],i=n("2877"),o={},c=Object(i["a"])(o,s,r,!1,null,null,null),l=c.exports,u=n("9483");Object(u["a"])("".concat("/assets/app/","service-worker.js"),{ready:function(){console.log("App is being served from cache by a service worker.\nFor more details, visit https://goo.gl/AFskqB")},registered:function(){console.log("Service worker has been registered.")},cached:function(){console.log("Content has been cached for offline use.")},updatefound:function(){console.log("New content is downloading.")},updated:function(){console.log("New content is available; please refresh.")},offline:function(){console.log("No internet connection found. App is running in offline mode.")},error:function(t){console.error("Error during service worker registration:",t)}});n("caad"),n("b0c0");var d=n("8c4f"),m=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"w-100",attrs:{id:"background"}},[n("div",{staticClass:"container py-5"},[n("div",{staticClass:"row justify-content-center"},[n("div",{staticClass:"col-md-8"},[n("div",{staticClass:"card shadow border-0"},[n("div",{staticClass:"card-body"},[t._l(t.errors,(function(e,a){return n("b-alert",{key:a,attrs:{show:"",dismissible:"",variant:"danger"}},[t._v(" "+t._s(e.message)+" "),n("b",[t._v("â‡’")])])})),n("h3",{staticClass:"display-4"},[t._v("Login")]),n("form",[n("div",{staticClass:"form-group"},[n("label",{attrs:{for:"username"}},[t._v("Username")]),n("input",{directives:[{name:"model",rawName:"v-model",value:t.form.username,expression:"form.username"}],staticClass:"form-control",attrs:{type:"email",id:"username"},domProps:{value:t.form.username},on:{input:function(e){e.target.composing||t.$set(t.form,"username",e.target.value)}}})]),n("div",{staticClass:"form-group"},[n("label",{attrs:{for:"password"}},[t._v("Password")]),n("input",{directives:[{name:"model",rawName:"v-model",value:t.form.password,expression:"form.password"}],staticClass:"form-control",attrs:{type:"password",id:"password"},domProps:{value:t.form.password},on:{input:function(e){e.target.composing||t.$set(t.form,"password",e.target.value)}}})]),n("div",{staticClass:"form-group row justify-content-center"},[n("div",{staticClass:"col-md-5"},[n("button",{staticClass:"btn btn-primary btn-block",attrs:{type:"button"},on:{click:t.handleLogin}},[t._v(" Login ")])])])])],2)])])])])])},f=[],h={name:"Login",data:function(){return{reg:/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,24}))$/,form:{username:"",password:""},errors:[],isLoading:!1}},methods:{validateInput:function(){return""===this.form.password?(this.errors.push({message:"password cannot be empty"}),!1):""===this.form.username?(this.errors.push({message:"email cannot be empty"}),!1):!(""!==this.form.username&&!this.reg.test(this.form.username))||(this.errors.push({message:"invalid email"}),!1)},handleLogin:function(t){var e=this;t.preventDefault(),this.validateInput()&&(this.$store.dispatch("login",{username:this.form.username,password:this.form.password,client_id:3,client_secret:"jsqUVnM6WkNRTn765XaGrD51djh9kMFyyRoUkYeq",grant_type:"password"},{root:!0}).then((function(){e.$router.push("/home")})).catch((function(t){console.log(t),e.errors.push({message:t})})),this.loading=!1)}}},p=h,v=(n("e6c6"),Object(i["a"])(p,m,f,!1,null,"4b729315",null)),g=v.exports,b=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("div",{attrs:{id:"side-bar"}},[t._m(0),n("hr"),n("ul",{attrs:{id:"side-bar-nav"}},[n("li",[n("router-link",{staticClass:"sidebar-link",attrs:{to:{name:"home"}}},[t._v("Screen")])],1),n("li",[n("router-link",{staticClass:"sidebar-link",attrs:{to:{name:"messages"}}},[t._v("Messages")])],1),n("li",[n("b-button",{attrs:{variant:"link"},on:{click:t.handleLogout}},[t._v("Logout")])],1)])]),n("div",{attrs:{id:"content"}},[n("router-view")],1)])},w=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"d-flex justify-content-center"},[n("h1",[t._v("HallScreen")])])}],y=n("5530"),_=n("2f62"),S={methods:Object(y["a"])({handleLogout:function(){var t=this;this.$store.dispatch("logout").then((function(){t.$router.push({name:"login"})})).catch((function(t){console.log(t)}))}},Object(_["b"])(["logout"]))},x=S,C=(n("c10e"),Object(i["a"])(x,b,w,!1,null,"b9bc514c",null)),k=C.exports,j=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"container-fluid"},[t.isLoading?n("div",{staticClass:"loading"},[t._v("Loading")]):t._e(),n("div",{staticClass:"border-bottom d-flex justify-content-between"},[n("h1",[t._v("Screens")]),n("button",{directives:[{name:"b-modal",rawName:"v-b-modal.new-screen",modifiers:{"new-screen":!0}}],staticClass:"btn btn-primary"},[t._v("New Screen")]),n("b-modal",{attrs:{id:"new-screen",title:"New Screen"},on:{ok:t.submitForm}},[n("form",[n("div",{staticClass:"form-group"},[n("label",{attrs:{for:"screen-title"}},[t._v("Title")]),n("input",{directives:[{name:"model",rawName:"v-model",value:t.form.title,expression:"form.title"}],staticClass:"form-control",attrs:{id:"screen-title",type:"text"},domProps:{value:t.form.title},on:{input:function(e){e.target.composing||t.$set(t.form,"title",e.target.value)}}})])])])],1),t.allScreens.length>0?n("div",[n("b-list-group",{staticClass:"mt-4"},t._l(t.allScreens,(function(e,a){return n("b-list-group-item",{key:a,staticClass:"flex-column align-items-start shadow border-0"},[n("div",{staticClass:"d-flex w-100 justify-content-between"},[n("h5",{staticClass:"mb-1"},[n("router-link",{attrs:{to:{name:"screens.show",params:{id:e.id}}}},[t._v(t._s(e.title))])],1),n("small",[t._v(t._s(e.createdAt))])]),n("p",{staticClass:"mb-1"},[t._v("Attachments: "+t._s(e.attachments.length))]),n("small",[n("router-link",{staticClass:"btn btn-success",attrs:{to:{name:"screens.view",params:{id:e.id}}}},[t._v("View")]),n("button",{directives:[{name:"b-modal",rawName:"v-b-modal",value:"edit-modal-"+e.id,expression:"'edit-modal-' + screen.id"}],staticClass:"btn btn-secondary"},[t._v(" Edit ")]),n("button",{directives:[{name:"b-modal",rawName:"v-b-modal",value:"delete-confirmation-"+e.id,expression:"'delete-confirmation-' + screen.id"}],staticClass:"btn btn-danger"},[t._v(" Delete ")])],1),n("b-modal",{attrs:{id:"edit-modal-"+e.id,title:"Edit "+e.title}},[n("p",{staticClass:"my-4"},[t._v("Hello from modal!")])]),n("b-modal",{attrs:{id:"delete-confirmation-"+e.id,title:"Delete Confirmation"},on:{ok:function(n){return t.handleDelete(e.id)}}},[n("p",{staticClass:"my-4 text-center"},[t._v("Are you sure?")])])],1)})),1)],1):n("h4",{staticClass:"text-center my-5"},[t._v(" No Screens have been created. create one now ")])])},A=[],$=(n("4160"),n("b64b"),n("159b"),{name:"Home",data:function(){return{form:{title:""},errors:[],isLoading:!1}},mounted:function(){var t=this;this.isLoading=!0,this.fetchScreens().then((function(){t.isLoading=!1}))},computed:Object(y["a"])({},Object(_["c"])(["currentScreen","allScreens"])),methods:Object(y["a"])(Object(y["a"])({},Object(_["b"])(["fetchScreens","fetchMoreScreens","createScreen","updateScreen","deleteScreen"])),{},{submitForm:function(t){var e=this;t.preventDefault(),this.isLoading=!0;var n=new FormData;Object.keys(this.form).forEach((function(t){n.append(t,e.form[t])})),this.$store.dispatch("createScreen",n).then((function(){e.isLoading=!1,e.$swal("Great!","Project Created successfully","success"),e.$bvModal.hide("new-screen")})).catch((function(t){e.isLoading=!1,e.$swal("Oops",t.data.message,"error")}))},handleDelete:function(t){var e=this;this.isLoading=!0,this.$store.dispatch("deleteScreen",t).then((function(){e.isLoading=!1,e.$swal("Done!","Screen Deleted successfully","success"),e.$bvModal.hide("delete-confirmation-"+t)})).catch((function(t){e.isLoading=!1,e.$swal("Oops",t.data.message,"error")}))}})}),O=$,M=(n("91f8"),Object(i["a"])(O,j,A,!1,null,"96613230",null)),P=M.exports,L=(n("d3b7"),n("bc3a")),N=n.n(L),D={devURL:"http://screens-app.lndo.site/",productionURL:"http://screens-app.lndo.site/"},E=function(){var t=null!=at.state.auth.user?at.state.auth.user.accessToken:"";return N.a.create({baseURL:D.productionURL,headers:{Authorization:"Bearer "+t}})},T={user:{name:"",email:"",accessToken:"",tokenExpiresAt:null}},I={authenticated:function(t){if(""===t.user.accessToken){if(t.user=JSON.parse(localStorage.getItem("user")),null===t.user)return!1;if(t.user.tokenExpiresAt<(new Date).getTime())return!1}return!0},user:function(t){return t.user}},F={login:function(t,e){var n=t.commit;return new Promise((function(t,a){E().post("oauth/token",e).then((function(e){var s=e.data;n("updateToken",s),E().get("api/user").then((function(t){var e=t.data;n("updateUserInfo",e)})).catch((function(t){a(t)})),t(!0)})).catch((function(t){a(t)}))}))},logout:function(t){var e=t.commit;return new Promise((function(t,n){E().get("api/logout").then((function(){e("deleteCredentials"),t(!0)})).catch((function(t){n(t)}))}))}},q={updateToken:function(t,e){var n=(new Date).getTime()+e.expires_in;t.user={accessToken:e.access_token,tokenExpiresAt:n}},updateUserInfo:function(t,e){t.user.name=e.name,t.user.email=e.email,localStorage.setItem("user",JSON.stringify(t.user))},deleteCredentials:function(t){t.user={name:"",email:"",accessToken:"",tokenExpiresAt:null},localStorage.removeItem("user")}},U={state:T,getters:I,actions:F,mutations:q},R=(n("c740"),n("a434"),n("2909")),G={screens:[],screen:null,links:null},H={allScreens:function(t){return t.screens},currentScreen:function(t){return t.screen}},J={fetchScreens:function(t){var e=t.commit;return new Promise((function(t,n){E().get("api/screens").then((function(n){var a=n.data;e("setScreens",a),t(!0)})).catch((function(t){n(t)}))}))},fetchMoreScreens:function(t){var e=t.commit;return new Promise((function(t,n){null!=G.links.next?E().get(G.links.next).then((function(n){var a=n.data;e("pushScreens",a),t(!0)})).catch((function(t){n(t)})):n("no more screens")}))},fetchScreen:function(t,e){var n=t.commit;return new Promise((function(t,a){E().get("api/screens/"+e).then((function(e){var a=e.data;n("setScreen",a),t(!0)})).catch((function(t){a(t)}))}))},createScreen:function(t,e){var n=t.commit;return new Promise((function(t,a){E().post("api/screens",e).then((function(e){var a=e.data;n("pushNewScreen",a),t(!0)})).catch((function(t){a(t)}))}))},updateScreen:function(t,e){var n=t.commit;return new Promise((function(t,a){E().post("api/screens/"+G.screen.id,e).then((function(e){var a=e.data;n("updateStateScreen",a),t(!0)})).catch((function(t){a(t)}))}))},deleteScreen:function(t,e){var n=t.commit;return new Promise((function(t,a){E().delete("api/screens/"+e).then((function(){n("deleteStateScreen",e),t(!0)})).catch((function(t){a(t)}))}))}},W={setScreens:function(t,e){t.screens=e.data,t.links=e.links},setScreen:function(t,e){t.screen=e},pushScreens:function(t,e){var n;(n=t.screens).push.apply(n,Object(R["a"])(e.data)),t.links=e.links},pushNewScreen:function(t,e){t.screens.unshift(e)},updateStateScreen:function(t,e){var n=t.screens.findIndex((function(t){return t.id===e.id}));t.screens[n]=e},deleteStateScreen:function(t,e){var n=t.screens.findIndex((function(t){return t.id===e}));t.screens.splice(n,1)}},z={state:G,getters:H,actions:J,mutations:W},B={attachments:[],links:null},V={allAttachments:function(t){return t.attachments}},Q={fetchAttachments:function(t,e){var n=t.commit;return new Promise((function(t,a){E().get("api/attachments/".concat(e)).then((function(e){var a=e.data;n("setAttachments",a),t(!0)})).catch((function(t){a(t)}))}))},fetchMoreAttachments:function(t){var e=t.commit;return new Promise((function(t,n){null!=B.links.next?E().get(B.links.next).then((function(n){var a=n.data;e("pushAttachments",a),t(!0)})).catch((function(t){n(t)})):n("no more attachments")}))},createAttachment:function(t,e){var n=t.commit;return new Promise((function(t,a){E().post("api/attachments/".concat(e.screen),e.form).then((function(e){var a=e.data;n("pushNewAttachment",a),t(!0)})).catch((function(t){a(t)}))}))},deleteAttachment:function(t,e){var n=t.commit;return new Promise((function(t,a){E().delete("api/attachments/"+e.attache+"/"+e.screen).then((function(){n("deleteStateAttachment",e),t(!0)})).catch((function(t){a(t)}))}))}},Y={setAttachments:function(t,e){t.attachments=e.data,t.links=e.links},pushScreens:function(t,e){var n;(n=t.attachments).push.apply(n,Object(R["a"])(e.data)),t.links=e.links},pushNewAttachment:function(t,e){t.attachments.unshift(e)},deleteStateAttachment:function(t,e){var n=t.attachments.findIndex((function(t){return t.id===e.attache}));t.attachments.splice(n,1)}},Z={state:B,getters:V,actions:Q,mutations:Y},K={messages:[]},X={allMessages:function(t){return t.messages}},tt={fetchMessages:function(t){var e=t.commit;return new Promise((function(t,n){E().get("api/messages").then((function(n){var a=n.data;e("setMessages",a),t(!0)})).catch((function(t){n(t)}))}))},createMessage:function(t,e){var n=t.commit;return new Promise((function(t,a){E().post("api/messages",e).then((function(e){var a=e.data;n("pushNewMessage",a),t(!0)})).catch((function(t){a(t)}))}))},updateMessage:function(t,e){var n=t.commit;return new Promise((function(t,a){E().post("api/messages/".concat(e.id),e.form).then((function(e){var a=e.data;n("updateStateMessage",a),t(!0)})).catch((function(t){a(t)}))}))},deleteMessage:function(t,e){var n=t.commit;return new Promise((function(t,a){E().delete("api/messages/".concat(e)).then((function(e){var a=e.data;n("deleteStateMessage",a),t(!0)})).catch((function(t){a(t)}))}))}},et={setMessages:function(t,e){t.messages=e},pushNewMessage:function(t,e){t.messages.push(e)},updateStateMessage:function(t,e){var n=t.messages.findIndex((function(t){return t.id===e.id}));t.messages[n]=e},deleteStateMessage:function(t,e){var n=t.messages.findIndex((function(t){return t.id===e}));t.messages.splice(n,1)}},nt={state:K,getters:X,actions:tt,mutations:et};a["default"].use(_["a"]);var at=new _["a"].Store({state:{},mutations:{},actions:{},modules:{auth:U,screens:z,attachments:Z,messages:nt}}),st=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[t.isLoading?n("div",{staticClass:"loading"},[t._v("Loading")]):t._e(),t.currentScreen?n("div",{staticClass:"container-fluid"},[n("div",{staticClass:"border-bottom d-flex justify-content-between"},[n("h1",[t._v(t._s(t.currentScreen.title))]),n("b-button",{directives:[{name:"b-modal",rawName:"v-b-modal.new-attachment",modifiers:{"new-attachment":!0}}],attrs:{variant:"primary"}},[t._v("New Attachment")]),n("b-modal",{attrs:{id:"new-attachment",title:"New Attachment"},on:{ok:t.submitAttachment}},[n("form",[n("div",{staticClass:"form-group"},[n("label",{attrs:{for:"attachment-title"}},[t._v("Title")]),n("input",{directives:[{name:"model",rawName:"v-model",value:t.form.title,expression:"form.title"}],staticClass:"form-control",attrs:{type:"text",id:"attachment-title"},domProps:{value:t.form.title},on:{input:function(e){e.target.composing||t.$set(t.form,"title",e.target.value)}}})]),n("div",{staticClass:"form-group"},[n("label",{attrs:{for:"attachment-type"}},[t._v("Type")]),n("select",{directives:[{name:"model",rawName:"v-model",value:t.form.type,expression:"form.type"}],staticClass:"form-control",attrs:{id:"attachment-type"},on:{change:function(e){var n=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(t.form,"type",e.target.multiple?n:n[0])}}},[n("option",{attrs:{value:""}},[t._v("Choose")]),n("option",{attrs:{value:"quote"}},[t._v("Quote")]),n("option",{attrs:{value:"image"}},[t._v("Image")]),n("option",{attrs:{value:"youtube"}},[t._v("Youtube")]),n("option",{attrs:{value:"tweet"}},[t._v("Tweet")])])]),"quote"===t.form.type?n("div",{staticClass:"form-group"},[n("label",{attrs:{for:"attachment-text"}},[t._v("Quote Text")]),n("textarea",{directives:[{name:"model",rawName:"v-model",value:t.form.text,expression:"form.text"}],staticClass:"form-control",attrs:{id:"attachment-text",cols:"30",rows:"10"},domProps:{value:t.form.text},on:{input:function(e){e.target.composing||t.$set(t.form,"text",e.target.value)}}})]):t._e(),"quote"===t.form.type||"image"===t.form.type?n("div",{staticClass:"form-group"},[n("label",{attrs:{for:"attachment-file"}},[t._v("Image")]),n("input",{staticClass:"form-control",attrs:{type:"file",id:"attachment-file"},on:{change:t.appendImage}})]):t._e(),"youtube"===t.form.type||"tweet"===t.form.type?n("div",{staticClass:"form-group"},[n("label",{attrs:{for:"attachment-link"}},[t._v("Link")]),n("input",{directives:[{name:"model",rawName:"v-model",value:t.form.link,expression:"form.link"}],staticClass:"form-control",attrs:{type:"text",id:"attachment-link"},domProps:{value:t.form.link},on:{input:function(e){e.target.composing||t.$set(t.form,"link",e.target.value)}}})]):t._e()])])],1),t.allAttachments&&t.allAttachments.length>0?n("div",{staticClass:"py-2"},[n("h3",[t._v("Attachments")]),n("b-list-group",t._l(t.allAttachments,(function(e,a){return n("b-list-group-item",{key:a,staticClass:"flex-column align-items-start shadow border-0"},[n("b-media",{scopedSlots:t._u([{key:"aside",fn:function(){return["youtube"!==e.type&&"tweet"!==e.type?n("b-img",{attrs:{src:e.image,width:"64",alt:"placeholder"}}):"tweet"===e.type?n("b-img",{attrs:{src:e.tweetInfo.images[0],width:"64",alt:"placeholder"}}):n("b-img",{attrs:{blank:"","blank-color":"#ccc",width:"64",alt:"placeholder"}})]},proxy:!0}],null,!0)},[n("h5",{staticClass:"mt-0"},[t._v(t._s(e.title))]),"quote"===e.type?n("p",[t._v(" "+t._s(e.text)+" ")]):t._e(),"youtube"===e.type?n("iframe",{attrs:{width:"560",height:"315",src:"https://www.youtube.com/embed/"+e.youtube,frameborder:"0",allow:"accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture",allowfullscreen:""}}):t._e(),"tweet"===e.type?n("div",{staticClass:"col-md-6"},t._l(e.tweetInfo.images,(function(t,e){return n("img",{key:e,staticClass:"img-fluid col-md-6 p-0",attrs:{src:t}})})),0):t._e(),n("div",{staticClass:"d-block mt-2"},[n("b-button",{directives:[{name:"b-modal",rawName:"v-b-modal",value:"delete-confirmation-"+e.id,expression:"'delete-confirmation-' + attachment.id"}],attrs:{variant:"danger"}},[t._v("Delete")]),n("b-modal",{attrs:{title:"Delete Confirmation",id:"delete-confirmation-"+e.id},on:{ok:function(n){return t.handleDelete(e.id)}}},[n("h4",{staticClass:"text-center"},[t._v("Are you sure?")])])],1)])],1)})),1)],1):n("h4",{staticClass:"text-center py-2"},[t._v("No Attachments")])]):t._e()])},rt=[],it={name:"Show",data:function(){return{form:{title:"",type:"",text:"",image:"",link:""},errors:[],isLoading:!1}},mounted:function(){var t=this;this.isLoading=!0,this.fetchScreen(this.$route.params.id),this.fetchAttachments(this.$route.params.id).then((function(){t.isLoading=!1}))},computed:Object(y["a"])({},Object(_["c"])(["currentScreen","allAttachments"])),methods:Object(y["a"])(Object(y["a"])({},Object(_["b"])(["fetchScreen","fetchAttachments","createAttachment"])),{},{submitAttachment:function(t){var e=this;t.preventDefault();var n=new FormData;Object.keys(this.form).forEach((function(t){n.append(t,e.form[t])}));var a={screen:this.currentScreen.id,form:n};this.$store.dispatch("createAttachment",a).then((function(){e.$swal("Great!","Attachment created successfully","success"),e.$bvModal.hide("new-attachment"),e.form={title:"",type:"",text:"",image:"",link:""}})).catch((function(t){console.log(Object({NODE_ENV:"production",BASE_URL:"/assets/app/"}).baseURL),e.$swal("Oops!",t,"error"),e.$bvModal.hide("new-attachment")}))},appendImage:function(t){this.form.image=t.target.files[0]},handleDelete:function(t){var e=this,n={attache:t,screen:this.currentScreen.id};this.$store.dispatch("deleteAttachment",n).then((function(){e.isLoading=!1,e.$swal("Done!","Attachment Deleted successfully","success"),e.$bvModal.hide("delete-confirmation-"+t)})).catch((function(t){e.isLoading=!1,e.$swal("Oops",t,"error")}))}})},ot=it,ct=(n("20d2"),Object(i["a"])(ot,st,rt,!1,null,"eefe1b78",null)),lt=ct.exports,ut=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"container-fluid"},[t._m(0),n("b-input-group",{staticClass:"mt-3",attrs:{prepend:"Message Text"}},[n("b-form-input",{model:{value:t.form.text,callback:function(e){t.$set(t.form,"text",e)},expression:"form.text"}}),n("b-input-group-append",[n("b-button",{attrs:{variant:"outline-success"},on:{click:t.submitForm}},[t._v("submit")])],1)],1),t.allMessages.length>0?n("b-list-group",{staticClass:"my-3"},t._l(t.allMessages,(function(e){return n("b-list-group-item",{key:e.id},[n("div",{staticClass:"d-flex justify-content-between"},[n("p",[t._v(t._s(e.text))]),n("b-button-group",[n("b-button",{on:{click:function(n){return t.showEditModal(e)}}},[t._v("Edit")]),n("b-button",{directives:[{name:"b-modal",rawName:"v-b-modal",value:"delete-confirmation-"+e.id,expression:"'delete-confirmation-'+message.id"}],attrs:{variant:"danger"}},[t._v("Delete")])],1),n("b-modal",{attrs:{id:"edit-modal-"+e.id,title:"editing message"},on:{ok:function(n){return t.handleUpdate(e)}}},[n("div",{staticClass:"form-group"},[n("label",{attrs:{for:"old-message-text"}},[t._v("Text")]),n("input",{directives:[{name:"model",rawName:"v-model",value:t.editForm.text,expression:"editForm.text"}],staticClass:"form-control",attrs:{id:"old-message-text",type:"text"},domProps:{value:t.editForm.text},on:{input:function(e){e.target.composing||t.$set(t.editForm,"text",e.target.value)}}})])]),n("b-modal",{attrs:{title:"Delete Confirmation",id:"delete-confirmation-"+e.id},on:{ok:function(n){return t.handleDelete(e.id)}}},[n("h4",{staticClass:"text-center"},[t._v("Are you sure?")])])],1)])})),1):n("h4",{staticClass:"text-center py-3"},[t._v("No Messages")])],1)},dt=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"border-bottom"},[n("h1",{staticClass:"display-4"},[t._v("Messages")])])}],mt={name:"Messages",data:function(){return{form:{text:""},editForm:{text:""}}},mounted:function(){this.fetchMessages()},computed:Object(y["a"])({},Object(_["c"])(["allMessages"])),methods:Object(y["a"])(Object(y["a"])({},Object(_["b"])(["fetchMessages","createMessage","updateMessage","deleteMessage"])),{},{submitForm:function(t){var e=this;t.preventDefault();var n=new FormData;Object.keys(this.form).forEach((function(t){n.append(t,e.form[t])})),this.$store.dispatch("createMessage",n).then((function(){e.$swal("Great!","Message saved successfully","success"),e.form={text:""}})).catch((function(t){e.$swal("error",t.data.message,"error")}))},showEditModal:function(t){this.editForm.text=t.text,this.$bvModal.show("edit-modal-"+t.id)},handleUpdate:function(t){var e=this,n=new FormData;Object.keys(this.editForm).forEach((function(t){n.append(t,e.editForm[t])})),n.append("_method","PATCH");var a={id:t.id,form:n};this.$store.dispatch("updateMessage",a).then((function(){e.$swal("Great!","Message updated successfully","success"),e.editForm={text:""}})).catch((function(t){e.$swal("error",t.data.message,"error")}))},handleDelete:function(t){var e=this;this.$store.dispatch("deleteMessage",t).then((function(){e.$swal("Great!","message deleted successfully","success")})).catch((function(t){e.$swal("Oops!",t.data.message,"error")}))}})},ft=mt,ht=Object(i["a"])(ft,ut,dt,!1,null,"0328f131",null),pt=ht.exports,vt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[t.isLoading?n("div",{staticClass:"loading"},[t._v("Loading")]):t._e(),t.currentScreen&&t.currentSlide?n("div",[n("div",{staticClass:"bg"}),n("div",{staticClass:"bg bg2"}),n("div",{staticClass:"bg bg3"}),n("div",{staticClass:"mx-auto my-5",attrs:{id:"content-container"}},["tweet"===t.currentSlide.type?n("div",{staticClass:"py-5 mx-3 bg-white shadow"},[n("b-media",{scopedSlots:t._u([{key:"aside",fn:function(){return[n("b-img",{attrs:{src:t.currentSlide.tweetInfo.user.profileImage,width:"64",alt:"placeholder"}})]},proxy:!0}],null,!1,3367163866)},[n("h5",{staticClass:"mt-0"},[t._v(t._s(t.currentSlide.title))]),n("p",[t._v(" "+t._s(t.currentSlide.text)+" ")]),n("div",{staticClass:"container-fluid"},[n("div",{staticClass:"row justify-content-center"},[n("div",{staticClass:"col-md-12"},t._l(t.currentSlide.tweetInfo.images,(function(t,e){return n("img",{key:e,staticClass:"img-fluid col-md-6 p-0",staticStyle:{"max-height":"32vh"},attrs:{src:t}})})),0)])])])],1):t._e(),"quote"===t.currentSlide.type?n("div",[n("div",{staticClass:"quote-background shadow",style:"background-image: url("+t.currentSlide.image+");"},[n("div",{staticClass:"container-fluid py-5"},[n("div",{staticClass:"row"},[n("div",{staticClass:"col-md-8"}),n("div",{staticClass:"col-md-4 text-center light-dark"},[n("p",{attrs:{id:"quote-mark"}},[t._v('"')]),n("article",{attrs:{id:"quote-text"}},[t._v(" "+t._s(t.currentSlide.text)+" ")])])])])])]):t._e(),"image"===t.currentSlide.type?n("div",[n("div",{staticClass:"quote-background",style:"background-image: url("+t.currentSlide.image+");"})]):t._e(),"youtube"===t.currentSlide.type?n("div",[n("youtube",{staticClass:"youtube-player",attrs:{"player-vars":{autoplay:1,controls:0},"player-width":"100%","player-height":"100%",mute:!0,"video-id":t.currentSlide.youtube},on:{ended:t.nextSlide}})],1):t._e(),"weather"===t.currentSlide.type?n("div",{staticClass:"py-5 mx-3"},[n("div",{staticClass:"container"},[t._m(0),n("div",{staticClass:"row my-3 justify-content-center text-center"},t._l(t.currentSlide.data,(function(e){return n("div",{key:e.id,staticClass:"col-md-4"},[n("div",{staticClass:"card shadow"},[n("div",{staticClass:"card-header"},[n("h3",{staticClass:"display-3"},[t._v(t._s(e.name.substring(0,6)))])]),n("div",{staticClass:"card-body"},[n("img",{staticClass:"weather-icon",attrs:{src:"http://openweathermap.org/img/w/"+e.weather[0].icon+".png",alt:""}})]),n("div",{staticClass:"card-footer"},[n("h3",{staticClass:"display-3"},[t._v(t._s(e.main.temp))])])])])})),0)])]):t._e()]),n("div",{attrs:{id:"clock-container"}},[n("digital-clock",{staticClass:"font-weight-bold font-italic",attrs:{blink:!0}}),n("small",[t._v(t._s(t._f("moment")(new Date,"dddd, MMMM Do")))])],1),n("div",{attrs:{id:"messages-container"}},[n("ul",t._l(t.currentScreen.messages,(function(e){return n("li",{key:e.id},[t._v(t._s(e.text))])})),0)])]):t._e()])},gt=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"card shadow light-white"},[n("div",{staticClass:"card-body"},[n("h1",{staticClass:"display-2 text-center my-auto py-5"},[t._v("Weather")])])])}],bt=n("4587"),wt=n("782e"),yt=n.n(wt),_t={name:"Slider",components:{DigitalClock:bt["a"]},data:function(){return{currentSlide:null,index:0,isLoading:!0}},mounted:function(){var t=this;this.$store.dispatch("fetchScreen",this.$route.params.id).then((function(){t.isLoading=!1,t.listenToNew(),t.listenToDelete()})),this.nextSlideRecursive()},computed:Object(y["a"])({},Object(_["c"])(["currentScreen"])),methods:Object(y["a"])({nextSlideRecursive:function(){if(this.currentScreen)if(null!=this.currentSlide&&"youtube"!==this.currentSlide.type){var t=Math.random()>.9;t?this.currentSlide=this.generateWeatherSlide():this.nextSlide()}else this.currentSlide=this.currentScreen.attachments[this.index];setTimeout(this.nextSlideRecursive,5e3)},nextSlide:function(){this.index++,"undefined"===typeof this.currentScreen.attachments[this.index]&&(this.index=0),this.currentSlide=this.currentScreen.attachments[this.index]},generateWeatherSlide:function(){for(var t=["https://api.openweathermap.org/data/2.5/weather?q=Riyadh,SA&units=metric&APPID=5a3311ede950f7587784e5f3a3104b99","https://api.openweathermap.org/data/2.5/weather?q=Mecca,SA&units=metric&APPID=5a3311ede950f7587784e5f3a3104b99","https://api.openweathermap.org/data/2.5/weather?q=Khobar,SA&units=metric&APPID=5a3311ede950f7587784e5f3a3104b99"],e=[],n=0;n<t.length;n++)N.a.get(t[n]).then((function(t){e.push(t.data)})).catch((function(t){console.log(t)}));return{type:"weather",data:e}},listenToNew:function(){var t=this,e=new yt.a("e4f4ccec7528c67e4b31",{cluster:"ap2"}),n=e.subscribe("screen-"+this.currentScreen.id+"-new-attachments");n.bind("App\\Events\\NewAttachment",(function(e){t.currentScreen.attachments.push(e.attachment)})).bind(this)},listenToDelete:function(){var t=this,e=new yt.a("e4f4ccec7528c67e4b31",{cluster:"ap2"}),n=e.subscribe("screen-"+this.currentScreen.id+"-deleted-attachments");n.bind("App\\Events\\AttachmentDeleted",(function(e){var n=t.currentScreen.attachments.findIndex((function(t){return t.id===e.attachment.id}));t.currentScreen.attachments.splice(n,1)})).bind(this)}},Object(_["b"])(["fetchScreen"]))},St=_t,xt=(n("ed69"),Object(i["a"])(St,vt,gt,!1,null,"00e1572c",null)),Ct=xt.exports;a["default"].use(d["a"]);var kt=[{path:"/",name:"login",component:g},{path:"/home",component:k,children:[{path:"/",name:"home",component:P},{path:"/screens/:id",name:"screens.show",component:lt},{path:"/messages",name:"messages",component:pt}]},{path:"/view/:id",name:"screens.view",component:Ct}],jt=new d["a"]({mode:"history",routes:kt}),At=["login","screens.view"];jt.beforeEach((function(t,e,n){at.getters.authenticated?"/"===t.path?n("/home"):n():At.includes(t.name)?n():n({name:"login"})}));var $t=jt,Ot=n("5f5b"),Mt=n("b1e0"),Pt=n("5886"),Lt=n("f6dd");n("4413"),n("6418");a["default"].use(Ot["a"]),a["default"].use(Mt["a"]),a["default"].use(Pt["a"]),a["default"].use(Lt["a"]),a["default"].use(n("2ead")),a["default"].config.productionTip=!1,new a["default"]({router:$t,store:at,render:function(t){return t(l)}}).$mount("#app")},5988:function(t,e,n){},6418:function(t,e,n){},"91f8":function(t,e,n){"use strict";var a=n("aab0"),s=n.n(a);s.a},aab0:function(t,e,n){},b58e:function(t,e,n){},c10e:function(t,e,n){"use strict";var a=n("5988"),s=n.n(a);s.a},e6c6:function(t,e,n){"use strict";var a=n("b58e"),s=n.n(a);s.a},ed69:function(t,e,n){"use strict";var a=n("1413"),s=n.n(a);s.a},f59c:function(t,e,n){}});
//# sourceMappingURL=app.9b104209.js.map